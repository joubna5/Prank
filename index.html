<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ’–</text></svg>">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Will You Be My Valentine?</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="overlay"></div>

    <div class="proposal-box">
        <h1>Can we be each other's Valentine, Princess?</h1>
        <div class="main-btn-wrapper">
            <div class="btn-slot">
                <button class="val-btn" id="yesBtn" onclick="handleYes()">Yes</button>
            </div>
            <div class="btn-slot">
                <button class="val-btn" id="noBtn" onmouseover="moveNoButton()" onclick="moveNoButton()">No</button>
            </div>
        </div>
    </div>

    <div id="alertYes" class="custom-alert">
        <h2>Oh, so you do love me ðŸ’–</h2>
        <p>FINALLY, now wait till the Gift is ready</p>
        <button onclick="closeAlert('alertYes')">Close</button>
    </div>

    <div id="alertNo" class="custom-alert">
        <h2>So you said yes</h2>
        <p>Now wait till the Gift is ready</p>
        <button onclick="closeAlert('alertNo')">Close</button>
    </div>

    <script>
        let moveCount = 0;
        let yesScale = 1;

        function handleYes() {
            if (moveCount === 0) showAlert('alertYes');
            else showAlert('alertNo');
        }

        function moveNoButton() {
            const noBtn = document.getElementById('noBtn');
            const yesBtn = document.getElementById('yesBtn');
            moveCount++;

            if (moveCount > 2) {
                yesScale += 0.4;
                yesBtn.style.transform = `scale(${yesScale})`;
            }

            const yesRect = yesBtn.getBoundingClientRect();
            const btnW = noBtn.offsetWidth;
            const btnH = noBtn.offsetHeight;

            // STRICT 70% Boundaries (accounting for button size)
            // minX is 15% margin + half button width to keep it fully inside
            const minX = (window.innerWidth * 0.15) + (btnW / 2);
            const maxX = (window.innerWidth * 0.85) - (btnW / 2);
            const minY = (window.innerHeight * 0.15) + (btnH / 2);
            const maxY = (window.innerHeight * 0.85) - (btnH / 2);

            const centerX = yesRect.left + (yesRect.width / 2);
            const centerY = yesRect.top + (yesRect.height / 2);

            // Logic: Move between Yes border and Screen border
            const currentRadiusMin = (yesRect.width / 2) + 5;
            const currentRadiusMax = Math.min(centerX - minX, maxX - centerX, centerY - minY, maxY - centerY);

            noBtn.style.position = 'fixed';

            // Check if there's actual room between Yes button and 70% margin
            if (currentRadiusMax > currentRadiusMin) {
                let finalX, finalY;
                let attempts = 0;
                do {
                    const angle = Math.random() * Math.PI * 2;
                    const radius = Math.random() * (currentRadiusMax - currentRadiusMin) + currentRadiusMin;
                    finalX = centerX + (Math.cos(angle) * radius);
                    finalY = centerY + (Math.sin(angle) * radius);
                    attempts++;
                } while (attempts < 100 && (finalX < minX || finalX > maxX || finalY < minY || finalY > maxY));

                noBtn.style.left = `${finalX - (btnW / 2)}px`;
                noBtn.style.top = `${finalY - (btnH / 2)}px`;
            } 
            // EMERGENCY MODE: 10px shift behind the Yes button
            else {
                const noRect = noBtn.getBoundingClientRect();
                let shiftX = (centerX < window.innerWidth / 2) ? 10 : -10;
                let shiftY = (centerY < window.innerHeight / 2) ? 10 : -10;
                
                // Clamp the emergency shift to ensure it NEVER exits the margins
                let newLeft = Math.max(minX - btnW/2, Math.min(noRect.left + shiftX, maxX - btnW/2));
                let newTop = Math.max(minY - btnH/2, Math.min(noRect.top + shiftY, maxY - btnH/2));

                noBtn.style.left = `${newLeft}px`;
                noBtn.style.top = `${newTop}px`;
            }
            noBtn.style.margin = "0";
        }

        function showAlert(id) {
            document.getElementById('overlay').style.display = 'block';
            document.getElementById(id).style.display = 'block';
        }

        function closeAlert(id) {
            document.getElementById('overlay').style.display = 'none';
            document.getElementById(id).style.display = 'none';
        }
    </script>
</body>
</html>
